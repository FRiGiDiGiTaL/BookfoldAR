(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{6110:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(7876),a=r(4232),l=r(9099);function i(){let e=(0,l.useRouter)(),{success:t,canceled:r,expired:i,session_id:o}=e.query,[n,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1),h="$24.99";(0,a.useEffect)(()=>{let e=(()=>{let e=localStorage.getItem("bookfoldar_trial");if(e)try{let t=JSON.parse(e);if(t.email)return t.email}catch(e){console.error("Invalid trial data in localStorage")}let t=localStorage.getItem("bookfoldar_subscription");if(t)try{let e=JSON.parse(t);if(e.email)return e.email}catch(e){console.error("Invalid subscription data in localStorage")}return""})();e&&c(e)},[]),(0,a.useEffect)(()=>{t&&o&&p(o)},[t,o]);let p=async e=>{try{let r=await fetch("/api/verify-session?session_id=".concat(e)),s=await r.json();if(s.paid){var t;let r={plan:"lifetime",status:"active",active:!0,startDate:Date.now(),source:"stripe_checkout",email:(null==(t=s.session)?void 0:t.customer_email)||n,paidViaStripe:!0,sessionId:e};localStorage.setItem("bookfoldar_subscription",JSON.stringify(r)),localStorage.removeItem("bookfoldar_trial"),console.log("✅ Payment verified and access granted")}}catch(e){console.error("Failed to verify payment:",e),m("Payment verification failed. Please contact support.")}},b=async()=>{if(!n.trim())return void m("Please enter your email address");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.trim()))return void m("Please enter a valid email address");x(!0),m("");try{let e=await fetch("/api/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.trim(),successUrl:"".concat(window.location.origin,"/paywall?success=true&session_id={CHECKOUT_SESSION_ID}"),cancelUrl:"".concat(window.location.origin,"/paywall?canceled=true")})});if(!e.ok)throw Error("Failed to create checkout session");let{url:t}=await e.json();if(t)window.location.href=t;else throw Error("No checkout URL received")}catch(e){console.error("Checkout error:",e),m("Failed to start checkout. Please try again.")}finally{x(!1)}};return t&&!d?(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"bg-green-700/10 border border-green-500/30 rounded-2xl p-8 max-w-md text-center backdrop-blur-lg",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Welcome to BookfoldAR Pro!"}),(0,s.jsx)("p",{className:"text-gray-200 mb-6",children:"Your one-time payment is complete! You now have lifetime access to all AR features."}),(0,s.jsx)("div",{className:"bg-green-500/20 border border-green-400/30 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("p",{children:"✅ Plan: BookfoldAR Pro (Lifetime)"}),(0,s.jsx)("p",{children:"✅ AR camera system unlocked"}),(0,s.jsx)("p",{children:"✅ Voice control enabled"}),(0,s.jsx)("p",{children:"✅ PDF pattern import ready"}),(0,s.jsx)("p",{children:"✅ All future updates included"})]})}),(0,s.jsx)("button",{onClick:()=>e.push("/app"),className:"bg-green-600 hover:bg-green-700 px-8 py-4 rounded-lg font-semibold text-lg text-white transition-colors w-full mb-4",children:"Launch BookfoldAR Pro \uD83D\uDE80"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"\uD83C\uDFAF Ready to create amazing book folding art!"})]})}):(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white py-16 px-6",children:[(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center mb-10",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",children:i?"Trial Expired - Upgrade to Pro":"Upgrade to BookfoldAR Pro"}),(0,s.jsx)("p",{className:"text-gray-300 text-lg",children:i?"Your 7-day free trial has ended. Get lifetime access with a one-time payment!":"Unlock all AR features with lifetime access — no monthly fees!"}),r&&(0,s.jsxs)("div",{className:"mt-6 p-3 bg-red-500/20 border border-red-400/30 rounded-lg text-red-400 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"❌"}),"Payment was canceled - no charges were made"]}),i&&(0,s.jsxs)("div",{className:"mt-6 p-3 bg-yellow-500/20 border border-yellow-400/30 rounded-lg text-yellow-400 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"⏰"}),"Trial period has ended - upgrade to continue"]})]}),(0,s.jsxs)("div",{className:"max-w-md mx-auto mb-8",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Email Address",n&&(0,s.jsx)("span",{className:"text-green-400 ml-2",children:"✓ Found from your account"})]}),(0,s.jsx)("input",{type:"email",value:n,onChange:e=>{c(e.target.value),m("")},placeholder:"Enter your email address",className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20 transition-all"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will be used for your BookfoldAR account and receipts"})]}),d&&(0,s.jsxs)("div",{className:"max-w-md mx-auto mb-6 p-3 bg-red-500/20 border border-red-400/30 rounded text-red-400 text-sm flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"⚠️"}),d]}),(0,s.jsx)("div",{className:"max-w-md mx-auto mb-8",children:(0,s.jsxs)("div",{className:"bg-white/6 backdrop-blur-lg border-2 border-blue-500 bg-blue-500/20 rounded-2xl p-8 shadow-lg shadow-blue-500/25 ring-2 ring-blue-400/30",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"BookfoldAR Pro"}),(0,s.jsx)("div",{className:"text-5xl font-bold mb-2 text-blue-400",children:h}),(0,s.jsx)("div",{className:"text-gray-400 text-sm mb-4",children:"one-time payment"}),(0,s.jsx)("div",{className:"inline-block px-4 py-2 rounded-full text-sm font-semibold mb-4 bg-purple-500/20 text-purple-400 border border-purple-400/30",children:"\uD83C\uDF89 Limited Time - Pay Once, Use Forever"}),(0,s.jsx)("p",{className:"text-gray-300 text-sm mb-6",children:"Lifetime access to all AR features"})]}),(0,s.jsx)("ul",{className:"text-sm text-gray-300 space-y-3 mb-8",children:["AR precision folding camera","Voice control navigation","PDF pattern import","Grid alignment tools","Particle effects & animations","All future updates included"].map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-green-400 mr-3 text-lg",children:"✓"}),e]},t))}),(0,s.jsx)("button",{onClick:b,disabled:!n.trim()||u,className:"w-full py-4 rounded-lg font-semibold text-lg transition-all duration-300 ".concat(n.trim()&&!u?"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-600 cursor-not-allowed text-gray-400"),children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent inline-block mr-2"}),"Creating checkout..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDE80"}),"Get Lifetime Access - ",h]})})]})}),(0,s.jsxs)("div",{className:"text-center max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6 text-sm text-gray-400 space-y-2",children:[(0,s.jsxs)("p",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-green-400 mr-2",children:"\uD83D\uDD12"}),"Secure payment via Stripe"]}),(0,s.jsxs)("p",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-green-400 mr-2",children:"\uD83D\uDCB3"}),"One-time payment • No subscriptions • No hidden fees"]}),(0,s.jsxs)("p",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-green-400 mr-2",children:"⚡"}),"Instant access after payment"]})]}),(0,s.jsxs)("div",{className:"p-6 bg-blue-500/10 rounded-lg border border-blue-400/20 backdrop-blur-lg mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-blue-300",children:"\uD83D\uDCA1 How it works"}),(0,s.jsxs)("div",{className:"text-sm text-blue-200 space-y-2",children:[(0,s.jsx)("p",{children:'1. Click "Get Lifetime Access" to go to Stripe\'s secure checkout'}),(0,s.jsxs)("p",{children:["2. Complete your one-time $",h.replace("$","")," payment"]}),(0,s.jsx)("p",{children:"3. Return here with instant lifetime access"}),(0,s.jsx)("p",{children:"4. Start creating amazing book folding art immediately!"})]})]}),i&&(0,s.jsx)("div",{className:"p-4 bg-yellow-500/10 rounded-lg border border-yellow-400/20 backdrop-blur-lg mb-6",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-200",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Thank you for trying BookfoldAR!"}),(0,s.jsx)("br",{}),"Your trial showed you our powerful AR features. Get lifetime access now with no monthly fees!"]})}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,s.jsx)("p",{children:"By purchasing, you agree to our Terms of Service and Privacy Policy."}),(0,s.jsx)("p",{children:"One-time payment for lifetime access. No recurring charges."}),(0,s.jsx)("p",{children:"All payments processed securely by Stripe. No card details stored on our servers."})]})]})]})}},8860:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/paywall",function(){return r(6110)}])},9099:(e,t,r)=>{e.exports=r(6296)}},e=>{e.O(0,[636,593,792],()=>e(e.s=8860)),_N_E=e.O()}]);