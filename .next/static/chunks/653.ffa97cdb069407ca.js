"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{9653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(7876),s=a(4232),n=a(8847),l=a.n(n);let i=l()(()=>a.e(699).then(a.bind(a,699)).then(e=>({default:e.ControlPanel})),{loadableGenerated:{webpack:()=>[699]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"w-full md:w-96 glass-panel-dark p-4 flex-shrink-0 shadow-2xl",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-700 rounded mb-4"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"h-16 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-12 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-12 bg-gray-700 rounded"})]})]})})}),c=l()(()=>a.e(945).then(a.bind(a,1945)).then(e=>({default:e.CameraView})),{loadableGenerated:{webpack:()=>[1945]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"flex-1 bg-gradient-to-b from-black via-gray-900 to-black flex items-center justify-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-400 border-t-transparent mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-xl",children:"Loading AR Camera..."})]})})}),d=e=>{let t=e.split("\n"),a=new Map,r=0,s=/^\s*(\d+(?:-\d+)?(?:,\s*\d+(?:-\d+)?)*)\s+([0-9.,\s]+)/;for(let e of t){let t=e.trim();if(t.startsWith("#")||t.startsWith("PAGE")||""===t)continue;let n=t.match(s);if(!n)continue;let l=n[1],i=n[2].trim().replace(/,\s*$/,""),c=[];for(let e of l.replace(/\s/g,"").split(","))if(e.includes("-")){let[t]=e.split("-"),a=parseInt(t,10);isNaN(a)||a%2==0||c.push(a)}else{let t=parseInt(e,10);isNaN(t)||t%2==0||c.push(t)}for(let e of c){let t=e-1;t>=0&&(a.set(t,i),e>r&&(r=e))}}if(0===r)return[];let n=Array(r).fill("");for(let[e,t]of a.entries())e<n.length&&(n[e]=t);return n},o=()=>{let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)("✨ Enter book dimensions and start camera for enhanced AR experience"),u="PAGE        Measurements in CM\n# Example pattern below - try PDF import for easier setup!\n17-18        0.5, 7.9, 8.0, 9.6, 9.8, 10.0, 10.1, 20.5\n19-20        0.5, 20.5\n21-22        0.5, 8.4, 8.5, 10.7, 10.9, 20.5",[g,h]=(0,s.useState)({heightCm:0,widthCm:0,paddingTopCm:0,paddingBottomCm:0,instructionsText:u,parsedInstructions:d(u),currentPage:16}),[m,f]=(0,s.useState)({pixelsPerCm:null}),[x,p]=(0,s.useState)({showAllMarks:!0,currentMarkIndex:0}),[k,b]=(0,s.useState)({scale:1,x:0,y:0}),[w,v]=(0,s.useState)(!0),[M,C]=(0,s.useState)("rule-of-thirds"),[N,P]=(0,s.useState)(.4),[y,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t(!0)},[]);let A=(0,s.useCallback)(e=>{let t=d(e);h(a=>{let r=a.currentPage;if(r>=t.length||""===t[r]){let e=t.findIndex(e=>""!==e);r=-1!==e?e:0}return{...a,instructionsText:e,parsedInstructions:t,currentPage:r}}),p({showAllMarks:!0,currentMarkIndex:0})},[]),j=(0,s.useCallback)(()=>{if(g.currentPage>=g.parsedInstructions.length)return[];let e=g.parsedInstructions[g.currentPage];return e?e.split(",").map(e=>parseFloat(e.trim())).filter(e=>!isNaN(e)):[]},[g.parsedInstructions,g.currentPage])();(0,s.useEffect)(()=>{p(e=>({...e,currentMarkIndex:Math.min(e.currentMarkIndex,Math.max(0,j.length-1))}))},[j.length,g.currentPage]);let S=(0,s.useCallback)(()=>{h(e=>{for(let t=e.currentPage+1;t<e.parsedInstructions.length;t++)if(e.parsedInstructions[t])return o("✨ Advanced to Page ".concat(t+1," with enhanced AR visualization")),I(!0),setTimeout(()=>I(!1),100),{...e,currentPage:t};return o("Reached the last page with marks (".concat(e.currentPage+1,")")),e}),p({showAllMarks:!0,currentMarkIndex:0})},[o]),D=(0,s.useCallback)(()=>{h(e=>{for(let t=e.currentPage-1;t>=0;t--)if(e.parsedInstructions[t])return o("✨ Viewing Page ".concat(t+1," with enhanced AR features")),I(!0),setTimeout(()=>I(!1),100),{...e,currentPage:t};return o("Already on the first page with marks (".concat(e.currentPage+1,")")),e}),p({showAllMarks:!0,currentMarkIndex:0})},[o]),T=(0,s.useCallback)(e=>{p(t=>{var a,r;if("toggleAll"===e){let e=!t.showAllMarks;return o(e?"✨ Showing all marks with particle effects":"\uD83C\uDFAF Single mark mode with enhanced focus"),I(!0),setTimeout(()=>I(!1),100),{...t,showAllMarks:e}}if("next"===e){let e=t.currentMarkIndex+1;return e>=j.length?(o("\uD83D\uDD04 Cycling to first mark"),{showAllMarks:!1,currentMarkIndex:0}):(o("\uD83D\uDCCF Mark ".concat(e+1,"/").concat(j.length,": ").concat(null==(a=j[e])?void 0:a.toFixed(1),"cm")),{showAllMarks:!1,currentMarkIndex:e})}if("prev"===e){let e=0===t.currentMarkIndex?j.length-1:t.currentMarkIndex-1;return o("\uD83D\uDCCF Mark ".concat(e+1,"/").concat(j.length,": ").concat(null==(r=j[e])?void 0:r.toFixed(1),"cm")),{showAllMarks:!1,currentMarkIndex:e}}return t})},[j.length,o]),E=(0,s.useCallback)(()=>{o("✨ Enhanced AR calibration complete! Particle effects, glassmorphism UI, and grid alignment ready."),I(!0),setTimeout(()=>I(!1),100)},[]);return e?(0,r.jsxs)("div",{className:"h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-gray-100 flex overflow-hidden",children:[(0,r.jsx)("div",{className:"w-full md:w-96 flex-shrink-0 flex flex-col",children:(0,r.jsx)(i,{isCameraActive:a,setIsCameraActive:n,pageData:g,setPageData:h,calibrationData:m,setCalibrationData:f,handleInstructionsTextChange:A,statusMessage:l,setStatusMessage:o,transform:k,setTransform:b,markNavigation:x,currentMarksCm:j,handleMarkNavigation:T,handleNextPage:S,handlePrevPage:D,onCalibrate:E,showGrid:w,setShowGrid:v,gridType:M,setGridType:C,gridOpacity:N,setGridOpacity:P})}),(0,r.jsx)("div",{className:"flex-1 bg-gradient-to-b from-black via-gray-900 to-black flex items-center justify-center",children:(0,r.jsx)(c,{isCameraActive:a,calibrationData:m,setCalibrationData:f,pageData:g,marksCm:j,markNavigation:x,transform:k,setTransform:b,setStatusMessage:o,onCalibrate:E,onMarkNavigation:T,onNextPage:S,onPrevPage:D,showGrid:w,gridType:M,gridOpacity:N,triggerParticles:y})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-400 border-t-transparent mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-xl",children:"Loading BookfoldAR..."})]})})}}}]);